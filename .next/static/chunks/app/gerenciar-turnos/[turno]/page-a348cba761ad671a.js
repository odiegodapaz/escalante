(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[475],{7317:function(e,a,t){Promise.resolve().then(t.bind(t,6867))},6867:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return u}});var r=t(7437),n=t(2265),s=t(6463),o=t(4379),i=t.n(o),c=t(1665),l=t.n(c);function u(){let[e,a]=(0,n.useState)([]),[t,o]=(0,n.useState)(!0),{turno:c}=(0,s.useParams)(),u=(0,s.useRouter)();(0,n.useEffect)(()=>{!async function(){let e=await fetch("http://localhost:3004/guardas?turno=".concat(c));e.ok?(a(await e.json()),o(!1)):i().fire("Erro ao carregar dados do servidor")}()},[c]);let d=(t,r,n)=>{a(e.map(e=>e.id===t?{...e,[r]:n}:e))},h=async()=>{try{for(let a of e)await fetch("http://localhost:3004/guardas/".concat(a.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});i().fire("Salvo com sucesso!"),u.push("/turnos")}catch(e){i().fire("Erro ao salvar dados")}},_=async t=>{try{await fetch("http://localhost:3004/guardas/".concat(t),{method:"DELETE"});let r=e.filter(e=>e.id!==t);a(r),i().fire("Exclu\xeddo com sucesso!")}catch(e){i().fire("Erro ao excluir guarda")}},m=e.map(e=>(0,r.jsxs)("div",{className:l().item,children:[(0,r.jsx)("label",{className:l().label,children:"Nome:"}),(0,r.jsx)("input",{className:l().input,type:"text",value:e.nome,onChange:a=>d(e.id,"nome",a.target.value)}),(0,r.jsx)("label",{className:l().label,children:"Turno:"}),(0,r.jsx)("input",{className:l().input,type:"text",value:e.turno,onChange:a=>d(e.id,"turno",a.target.value)}),(0,r.jsx)("label",{className:l().label,children:"Coordenador:"}),(0,r.jsx)("input",{className:l().input,type:"text",value:e.coordenador||"",onChange:a=>d(e.id,"coordenador",a.target.value)}),(0,r.jsx)("label",{className:l().label,children:"Fiscal:"}),(0,r.jsx)("input",{className:l().input,type:"text",value:e.fiscal||"",onChange:a=>d(e.id,"fiscal",a.target.value)}),(0,r.jsx)("button",{className:l().buttonExcluir,onClick:()=>_(e.id),children:"Excluir"})]},e.id));return t?(0,r.jsx)("div",{children:"Carregando..."}):(0,r.jsxs)("div",{className:l().container,children:[(0,r.jsxs)("h1",{className:l().title,children:["Gerenciar Turno: ",c]}),(0,r.jsx)("div",{className:l().tableContainer,children:(0,r.jsx)("div",{className:l().grid,children:m})}),(0,r.jsx)("button",{className:l().buttonSalvar,onClick:h,children:"Salvar"})]})}},6463:function(e,a,t){"use strict";var r=t(1169);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}})},1665:function(e){e.exports={container:"GerenciarTurnos_container__nNZSA",title:"GerenciarTurnos_title__ewcsm",tableContainer:"GerenciarTurnos_tableContainer__f9y_O",grid:"GerenciarTurnos_grid__pFzFj",item:"GerenciarTurnos_item__ZydGJ",label:"GerenciarTurnos_label__56WRg",input:"GerenciarTurnos_input__deWyx",buttonSalvar:"GerenciarTurnos_buttonSalvar__YvuUT",buttonExcluir:"GerenciarTurnos_buttonExcluir__trQiT"}}},function(e){e.O(0,[738,461,971,23,744],function(){return e(e.s=7317)}),_N_E=e.O()}]);